---
title: 数据结构扩展篇二之线段树
published: false
layout: post
author: 陈家辉
tags:
- 数据结构
- 算法
- 基础
- 古城算法
---

# 参考

[古城算法ppt](https://docs.google.com/presentation/d/1ai907zOZSflW9rMmEA9JdjwPwlozxuhPq_q55XO4NHA/edit#slide=id.p)
[oi-线段树](https://oi-wiki.org/ds/seg/)

# 解决什么问题

给定一个长度为n的序列，频繁地求其中某个区间的最值，以及更新某个区间的所有值。

思路一：遍历查询与插入，时间复杂度$O(q*n)$，q为查询的次数。

思路二：使用一个$O(n^2)$的数组，a[i]\[j]表示区间[i,j]的最小值。查询时间复杂度为$O(1)$，空间换时间，但是修改某个区间的值很麻烦。

思路三：线段树。时间复杂度$O(logn)$



# 是什么

线段树是算法竞赛中常用的用来维护 区间信息 的数据结构。

线段树可以在$O(logN)$的时间复杂度内实现单点修改、区间修改、区间查询（区间求和，求区间最大值，求区间最小值，区间最小公倍数，区间最大公因数）等操作。

<img src="https://cdn.jsdelivr.net/gh/CJH876492153/picture@main/H_XqzibFSfYxAGJI3_c34VjqfFSUiXjjJOXZ-J5GMYvclly39Fg9c5lntrz9xfSm6gyEkmme9mjbWQBgKg_ccV-KvMY2Qx9FuU4hQRUU6v8kH9_RlaMxzoRZ_i0XHnJiKRtHQG01oiLTNjv8I1xKhrxf=s2048.png" alt="img" style="zoom:67%;" />

1. 叶子节点存储输入的数组元素
2. 每一个内部节点表示叶子结点的合并。合并的方法根据题目进行选择。这个合并方式是求和。

此处用树的数组形式来表示线段树，对于小标i的节点，左孩子2i+1，有孩子2i+2，父节点floor((i-2)/2)

默认method为

```java
update()
rangeSum() 
rangeMax() 
rangeMin()
rangeUpdate()
```



# 实现

普通实现

# 总结

